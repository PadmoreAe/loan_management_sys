<div class="container-fluid">
  <p id="notice"><%= notice %></p>

  <h1>Loans</h1>


  <%= link_to 'Add New Loan', new_loan_path, class: "btn btn-warning"%><br /><br />

  <input id="myInputTextFielddddd" type="text" class="form-control" placeholder="Search Investors"><br /><br />



  <table id="loans-table" class="table">
    <thead>
      <tr>
        <th>Principal</th>
        <th>Date payment starts</th>
        <th>Date loan given</th>
        <th>Interest on loan per month</th>
        <th>Loan period in months</th>
        <th>Payment cadence</th>
        <th>Payment day</th>
        <th>Loaner</th>
        <th>Status</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @loans.each do |loan| %>
        <tr>
          <td><%= loan.principal %></td>
          <td><%= loan.date_payment_starts %></td>
          <td><%= loan.date_loan_given %></td>
          <td><%= loan.interest_on_loan_per_month %></td>
          <td><%= loan.loan_period_in_months %></td>
          <td><%= loan.payment_cadence %></td>
          <td><%= loan.payment_day %></td>
          <td><%= loan.loaner_id %></td>
          <td><%= loan.status %></td>
          <td><%= link_to 'Show', loan %></td>
          <td><%= link_to 'Edit', edit_loan_path(loan) %></td>
          <td><%= link_to 'Destroy', loan, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>

  <br>


  <% content_for :page_scripts do %>
    <script>
      function readyy(){
        let oTable = $('#loans-table').DataTable({ pageLength: 50}); 
        $('#myInputTextFielddddd').keyup(function(){
            oTable.search($(this).val()).draw() ;
        })
      }
      $(document).ready(readyy)
    </script>

  <% end %>
  </div>
</div>